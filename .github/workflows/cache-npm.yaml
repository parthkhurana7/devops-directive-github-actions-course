name: Project Diagnostic Tool # A generic name for onboarding

on: 
  push:
  workflow_dispatch: # Allows you to manually click "Run" for testing

jobs:
  diagnostic-check:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      # 1. Basic Bash Check (Works everywhere)
      - name: System Information
        run: |
          echo "Current Runner OS: $RUNNER_OS"
          echo "Current Directory: $(pwd)"
          echo "Files in this repo:"
          ls -R

      # 2. Python Check (Safe because Python is pre-installed on Ubuntu runners)
      - name: Python Environment Check
        shell: python
        run: |
          import sys
          import os
          print(f"Python version: {sys.version}")
          print(f"Workflow triggered by: {os.getenv('GITHUB_ACTOR')}")

      # 3. Conditional Step (Only runs if a certain file exists)
      - name: Run Node logic ONLY if package.json exists
        if: hashFiles('package.json') != '' # This 'if' check prevents the error you saw
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'